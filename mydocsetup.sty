\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mydocsetup}

\usepackage{imakeidx} % for index
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage[utf8]{inputenc}
\usepackage[acronym, nonumberlist, section, nogroupskip]{glossaries}

% fix space between glossary items
\usepackage{enumitem}
\setlist[description]{itemsep=0.1ex, leftmargin=0cm,rightmargin=0cm} % keep some space...looks nice
% \setlist[description]{noitemsep} remove all spaces 

\usepackage[english]{babel}
% \usepackage{indentfirst} indent first
\usepackage{titlesec}
\usepackage{float}
\usepackage{tocloft}
\usepackage{titletoc}
\usepackage{geometry}
\usepackage{etoolbox} % for removing lof, lot grouping
\usepackage[
	backend=biber,
	style=ieee,
]{biblatex}
\usepackage{setspace}

% for tables that expand across pages
\usepackage{longtable}

% fix space between longtable and caption
\usepackage[tableposition=below]{caption}
\captionsetup[longtable]{skip=1em}

%================ SETUP: CODE LISTING
\usepackage{listings}
\usepackage{xcolor}

% general style for all code blocks
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize, % original was footnotesize
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=1
}

\lstset{style=mystyle}

% add Javascript language
\lstdefinelanguage[ECMAScript2015]{JavaScript}[]{JavaScript}{
	morekeywords=[1]{await, async, case, catch, class, const, default, do,
			enum, export, extends, finally, from, implements, import, instanceof,
			let, static, super, switch, throw, try},
	morestring=[b]` % Interpolation strings.
}

%
% JavaScript version 1.1 by Gary Hammock
%
% Reference:
%   B. Eich and C. Rand Mckinney, "JavaScript Language Specification
%     (Preliminary Draft)", JavaScript 1.1.  1996-11-18.  [Online]
%     http://hepunx.rl.ac.uk/~adye/jsspec11/titlepg2.htm
%

\lstdefinelanguage{JavaScript}{
	morekeywords=[1]{break, continue, delete, else, for, function, if, in,
			new, return, this, typeof, var, void, while, with},
	% Literals, primitive types, and reference types.
	morekeywords=[2]{false, null, true, boolean, number, undefined,
			Array, Boolean, Date, Math, Number, String, Object},
	% Built-ins.
	morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
	sensitive,
	morecomment=[s]{/*}{*/},
	morecomment=[l]//,
	morecomment=[s]{/**}{*/}, % JavaDoc style comments
	morestring=[b]',
	morestring=[b]"
}[keywords, comments, strings]

\lstalias[]{ES6}[ECMAScript2015]{JavaScript}

% define styles to use for each js version (ES6, plain js)
\lstdefinestyle{JavaScript}{
	language=JavaScript
}

\lstdefinestyle{ES6}{
	language=ES6
}

%================ SETUP: PATHS
\graphicspath{ {./images/} }
\addbibresource{./references/biblography.bib}


%================ SETUP: LIST OF ACRONYMS, GLOSSARIES AND INDEX
\makeindex
\makeglossaries
\setglossarystyle{list}

\newacronym{bit}{BIT}{Bachelor of Information Technology}
\newacronym{ucsc}{UCSC}{University of Colombo School of Computing}
\newacronym{grn}{GRN}{Goods Received Note}
\newacronym{sdlc}{SDLC}{Software Development Life Cycle}
\newacronym{mvc}{MVC}{Model View Controller}
\newacronym{uml}{UML}{Unified Modeling Language}
\newacronym{erd}{ERD}{Entity Relationship Diagram}
\newacronym{ui}{UI}{User Interface}
\newacronym{gui}{GUI}{Graphical User Interface}
\newacronym{rdbms}{RDBMS}{Relational Database Management System}
\newacronym{api}{API}{Application Programming Interface}
\newacronym{npm}{NPM}{Node Package Manager}
\newacronym{orm}{ORM}{Object Relational Mapping}
\newacronym{oop}{OOP}{Object Oriented Programming}
\newacronym{dbms}{DBMS}{Database Management System}
\newacronym{dao}{DAO}{Data Access Object}


\newglossaryentry{computerbasedsol}
{
    name={Computer-based solution},
    description={A way which an IT specialist gives a solution nested of a manual system in order to get a better efficiency through computers and other technical equipment}
}

\newglossaryentry{databasemgtsys}
{
    name={Database management system},
    description={A special data processing system, or part of a data processing system, which aids in the storage, manipulation, reporting, management, and control of data}
}

\newglossaryentry{funcreq}
{
    name={Functional requirements},
    description={Actual or anticipated questions which may be posed to an information retrieval system}
}

\newglossaryentry{manualsystem}
{
    name={Manual system},
    description={A system involving data processing which does not make use of stored program computing equipment}
}

\newglossaryentry{nonfuncreq}
{
    name={Non-functional requirements},
    description={In systems engineering and requirements engineering, a non-functional requirement is a requirement that specifies criteria that can be used to judge the operation of a system, rather than specific behaviors. The plan for implementing non-functional requirements is detailed in the system architecture}
}

\newglossaryentry{processmod}
{
    name={Process modelling},
    description={A form of modeling where the model produced is a software or system development process}
}

\newglossaryentry{webbasedsystem}
{
    name={Web-based system},
    description={A web-based solution is a way of implementing a solution to a computing issue or business issue through doing some work on the net}
}

\newglossaryentry{crudoperations}
{
    name={CRUD operations},
    description={CRUD or C.R.U.D (Create, Retrieve, Update and Delete) operations are the basic operations in any database}
}

%================ SETUP: FORMAT CHAPTER NAMES IN THE DOCUMENT BODY (PAGES)
\titleformat{\chapter}[hang]
{\normalfont\huge\bfseries}{\thechapter.}{5pt}{}
\titlespacing*{\chapter}{0pt}{-30pt}{10pt}


% ================ SETUP: TABLE OF CONTENTS
% space before and after toc title
\setlength{\cftbeforetoctitleskip}{3pt}
\setlength{\cftaftertoctitleskip}{20pt}

% format chapter titles for ucsc modal
\titlecontents{chapter}
[0pt]% <left>
{\addvspace{10pt}}% {above}
%    {\bfseries}% <above-code>
{\bf\thecontentslabel. \quad}% <numbered-entry-format>
{}% <numberless-entry-format>
{\titlerule*[0.8pc]{.}\contentspage}

% set space above section, subsection & subsubsection titles
\setlength{\cftbeforesecskip}{10pt}
\setlength{\cftbeforesubsecskip}{10pt}
\setlength{\cftbeforesubsubsecskip}{10pt}

% dotted lines for chapters titles
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}}

% enable subsubsections
\setcounter{tocdepth}{0}


% ================ SETUP: LIST OF FIGURES
% space before and after lof title
\setlength{\cftbeforeloftitleskip}{3pt}
\setlength{\cftafterloftitleskip}{10pt}

% space before each entry
\setlength{\cftbeforefigskip}{10pt}

% left indent
\setlength{\cftfigindent}{0pt}

% disable grouping entries based on chapters
\makeatletter
\patchcmd{\@chapter}{\addtocontents{lof}{\protect\addvspace{10\p@}}}{}{}{}
\makeatother


% ================ SETUP: LIST OF TABLES
% space before and after lof title
\setlength{\cftbeforelottitleskip}{3pt}
\setlength{\cftafterlottitleskip}{10pt}

% space before each entry
\setlength{\cftbeforetabskip}{10pt}

% left indent
\setlength{\cfttabindent}{0pt}

% disable grouping entries based on chapters
\makeatletter
\patchcmd{\@chapter}{\addtocontents{lot}{\protect\addvspace{10\p@}}}{}{}{}
\makeatother


%================ SETUP: FONTS
\setmainfont[ExternalLocation=fonts/]{liberationSerifRegular.ttf}%
[BoldFont={liberationSerifBold.ttf},
	ItalicFont={liberationSerifItalic.ttf},
	BoldItalicFont={liberationSerifBoldItalic.ttf}]


%=============== SETUP: MARGIN AND PAGE SETUP
\geometry{a4paper, left=25mm,  top=25mm, bottom=25mm, right=25mm}
% \usepackage[document]{ragged2e} % left-alignment
% \hyphenpenalty=10000
% \tolerance=10000
